{{- if eq .Values.global.mode "poc" }}
# Auto-generated credentials for POC deployment
# These are passed to the deployment controller
apiVersion: v1
kind: Secret
metadata:
  name: stackbill-auto-credentials
  namespace: {{ .Values.global.namespace }}
  labels:
    app.kubernetes.io/name: stackbill
    app.kubernetes.io/component: credentials
    app.kubernetes.io/mode: poc
type: Opaque
stringData:
  # MySQL Credentials
  MYSQL_HOST: "{{ .Release.Name }}-mysql"
  MYSQL_PORT: "3306"
  MYSQL_DATABASE: "{{ .Values.mysql.auth.database }}"
  MYSQL_USERNAME: "{{ .Values.mysql.auth.username }}"
  MYSQL_PASSWORD: "{{ .Values.mysql.auth.password | default (randAlphaNum 16) }}"
  MYSQL_ROOT_PASSWORD: "{{ .Values.mysql.auth.rootPassword | default (randAlphaNum 16) }}"

  # MongoDB Credentials
  MONGODB_HOST: "{{ .Release.Name }}-mongodb"
  MONGODB_PORT: "27017"
  MONGODB_DATABASE: "{{ .Values.mongodb.auth.database }}"
  MONGODB_USERNAME: "{{ .Values.mongodb.auth.username }}"
  MONGODB_PASSWORD: "{{ .Values.mongodb.auth.password | default (randAlphaNum 16) }}"

  # RabbitMQ Credentials
  RABBITMQ_HOST: "{{ .Release.Name }}-rabbitmq"
  RABBITMQ_PORT: "5672"
  RABBITMQ_USERNAME: "{{ .Values.rabbitmq.auth.username }}"
  RABBITMQ_PASSWORD: "{{ .Values.rabbitmq.auth.password | default (randAlphaNum 16) }}"
  RABBITMQ_VHOST: "/"

  # NFS Configuration
  NFS_SERVER: "{{ .Release.Name }}-nfs"
  NFS_PATH: "{{ .Values.nfs.storage.path }}"

  # Domain Configuration
  DOMAIN_NAME: "{{ .Values.domain.name }}"
{{- end }}
